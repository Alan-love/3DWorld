// Note: Only one light source (for now)
uniform int sm_tu_id;
uniform sampler2D sm_tex;

float get_shadow_map_weight(in vec4 pos, in int light) {
	vec4 shadow_coord = gl_TextureMatrix[sm_tu_id] * pos;
	shadow_coord /= shadow_coord.w;
	//shadow_coord.z += 0.0005; // Used to lower moiré pattern and self-shadowing
	float dist = texture2D(sm_tex, shadow_coord.st).z;
	return ((dist < shadow_coord.z) ? 0.0 : 1.0);
}
